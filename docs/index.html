cat > index.html <<'HTML'
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Refer & Earn — Delight Dental Care</title>
  <link rel="stylesheet" href="css/style.css">
  <!-- Firebase v8 -->
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-storage.js"></script>
</head>
<body>
  <main class="container center">
    <div class="card auth-card">
      <h1 class="brand">Refer & Earn</h1>
      <p class="lead">Sign up / Login — Admin will approve new accounts</p>

      <div class="tabs">
        <button class="tabBtn" data-target="userTab">User</button>
        <button class="tabBtn" data-target="advertiserTab">Advertiser</button>
        <button class="tabBtn" data-target="adminTab">Admin</button>
      </div>

      <!-- USER -->
      <div id="userTab" class="tab">
        <h3>User — Sign up / Login</h3>
        <input id="u_name" placeholder="Full name (signup)">
        <input id="u_email" placeholder="Email">
        <input id="u_pass" type="password" placeholder="Password">
        <div class="row">
          <button id="btnUserSignup" class="btn">Sign up</button>
          <button id="btnUserLogin" class="btn btn-ghost">Login</button>
        </div>
        <p class="muted">Use referral link: <code>?ref=UID</code></p>
      </div>

      <!-- ADVERTISER -->
      <div id="advertiserTab" class="tab" style="display:none">
        <h3>Advertiser — Sign up / Login</h3>
        <input id="ad_company" placeholder="Company name (signup)">
        <input id="ad_email" placeholder="Email">
        <input id="ad_pass" type="password" placeholder="Password">
        <div class="row">
          <button id="btnAdvSignup" class="btn">Sign up</button>
          <button id="btnAdvLogin" class="btn btn-ghost">Login</button>
        </div>
        <p class="muted">Advertisers pay when submitting ads (Paystack).</p>
      </div>

      <!-- ADMIN -->
      <div id="adminTab" class="tab" style="display:none">
        <h3>Admin Login</h3>
        <input id="adm_user" placeholder="Username">
        <input id="adm_pass" type="password" placeholder="Password">
        <button id="btnAdminLogin" class="btn">Login as Admin</button>
        <p class="muted">Username: <strong>batir</strong> • Password: <strong>mubsbatir</strong></p>
      </div>

      <p id="message" class="muted"></p>
    </div>
  </main>

<script>
// Firebase config
const firebaseConfig = {
  apiKey: "AIzaSyBMV7NUVLf-9aEer5jlhqOv5u_Z7XM5oVo",
  authDomain: "refer-and-earn-74706.firebaseapp.com",
  databaseURL: "https://refer-and-earn-74706-default-rtdb.firebaseio.com",
  projectId: "refer-and-earn-74706",
  storageBucket: "refer-and-earn-74706.firebasestorage.app",
  messagingSenderId: "681290792261",
  appId: "1:681290792261:web:982ae0c9f81b7291bc922c",
  measurementId: "G-GYJ5D768D6"
};
firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const db = firebase.database();

const showMsg = (t)=> { const m = document.getElementById('message'); m.innerText = t; setTimeout(()=> m.innerText='',6000); };

// Tabs
document.querySelectorAll('.tabBtn').forEach(b=>{
  b.addEventListener('click', ()=> {
    document.querySelectorAll('.tab').forEach(t=> t.style.display='none');
    document.getElementById(b.dataset.target).style.display='block';
  });
});

// USER signup/login
document.getElementById('btnUserSignup').addEventListener('click', async ()=>{
  const name = document.getElementById('u_name').value.trim();
  const email = document.getElementById('u_email').value.trim().toLowerCase();
  const pass = document.getElementById('u_pass').value;
  if(!email || !pass) return showMsg('Email & password required');
  try{
    const userCred = await auth.createUserWithEmailAndPassword(email, pass);
    const uid = userCred.user.uid;
    const refBy = new URLSearchParams(location.search).get('ref') || null;
    await db.ref('users/'+uid).set({
      uid, name, email, role:'user', approved:false, active:true, balance:0, level:1, createdAt: Date.now(), refBy
    });
    await db.ref('signupRequests').push({ uid, name, email, role:'user', status:'pending', createdAt: Date.now() });
    await db.ref('notifications/admin').push({ type:'signup', uid, name, email, createdAt: Date.now() });
    showMsg('Signup complete. Wait for admin approval.');
    await auth.signOut();
  }catch(err){ showMsg(err.message); }
});
document.getElementById('btnUserLogin').addEventListener('click', async ()=>{
  const email = document.getElementById('u_email').value.trim();
  const pass = document.getElementById('u_pass').value;
  if(!email || !pass) return showMsg('Enter email & password');
  try{
    await auth.signInWithEmailAndPassword(email, pass);
    // check approved
    const snap = await db.ref('users').orderByChild('email').equalTo(email).once('value');
    if(snap.exists()){
      const userObj = Object.values(snap.val())[0];
      if(!userObj.approved) { showMsg('Account pending admin approval'); await auth.signOut(); return; }
    }
    location.href = 'dashboard.html';
  }catch(err){ showMsg(err.message); }
});

// ADVERTISER signup/login
document.getElementById('btnAdvSignup').addEventListener('click', async ()=>{
  const company = document.getElementById('ad_company').value.trim();
  const email = document.getElementById('ad_email').value.trim().toLowerCase();
  const pass = document.getElementById('ad_pass').value;
  if(!email||!pass||!company) return showMsg('Fill required fields');
  try{
    const userCred = await auth.createUserWithEmailAndPassword(email, pass);
    const uid = userCred.user.uid;
    await db.ref('users/'+uid).set({ uid, name:company, email, role:'advertiser', approved:false, balance:0, createdAt:Date.now() });
    await db.ref('signupRequests').push({ uid, name:company, email, role:'advertiser', status:'pending', createdAt:Date.now() });
    await db.ref('notifications/admin').push({ type:'advertiserSignup', uid, name:company, email, createdAt:Date.now() });
    showMsg('Advertiser signup complete. Wait for admin approval.');
    auth.signOut();
  }catch(err){ showMsg(err.message); }
});
document.getElementById('btnAdvLogin').addEventListener('click', async ()=>{
  const email = document.getElementById('ad_email').value.trim();
  const pass = document.getElementById('ad_pass').value;
  if(!email||!pass) return showMsg('Enter credentials');
  try{
    await auth.signInWithEmailAndPassword(email, pass);
    const snap = await db.ref('users').orderByChild('email').equalTo(email).once('value');
    if(snap.exists()){
      const userObj = Object.values(snap.val())[0];
      if(!userObj.approved){ showMsg('Advertiser pending admin approval'); await auth.signOut(); return; }
      location.href = 'advertiser.html';
    }
  }catch(err){ showMsg(err.message); }
});

// ADMIN login (client-side quick login)
const ADMIN_USER = 'batir';
const ADMIN_PASS = 'mubsbatir';
document.getElementById('btnAdminLogin').addEventListener('click', ()=>{
  const u = document.getElementById('adm_user').value.trim();
  const p = document.getElementById('adm_pass').value.trim();
  if(u===ADMIN_USER && p===ADMIN_PASS){ location.href = 'admin.html'; }
  else showMsg('Invalid admin credentials');
});
</script>
</body>
</html>
HTML
